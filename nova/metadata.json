{
  "name": "nova",
  "description": "The OpenStack Compute service Nova.",
  "long_description": "Description\n===========\n\nThis cookbook installs the OpenStack Compute service **Nova** as part of the OpenStack **Essex** reference deployment Chef for OpenStack. The http://github.com/opscode/openstack-chef-repo contains documentation for using this cookbook in the context of a full OpenStack deployment. Nova is installed from packages.\n\nhttp://nova.openstack.org\n\nRequirements\n============\n\nChef 0.10.0 or higher required (for Chef environment use).\n\nPlatforms\n--------\n\n* Ubuntu-12.04\n* Fedora-17\n\nCookbooks\n---------\n\nThe following cookbooks are dependencies:\n\n* apt\n* database\n* glance\n* keystone\n* mysql\n* openssh\n* osops-utils\n* rabbitmq\n* selinux (Fedora)\n* sysctl\n\nRecipes\n=======\n\napi-ec2\n----\n-Includes recipe `nova-common`\n-Installs AWS EC2 compatible API and configures the service and endpoints in keystone\n\napi-metadata\n----\n-Includes recipe `nova-common`\n-Installs the nova metadata package\n\napi-os-compute\n----\n-Includes recipe `nova-common`\n-Installs OS API and configures the service and endpoints in keystone\n\napi-os-volume\n----\n-Includes recipe `nova-common`\n-Installs the OpenStack volume service API\n\napt\n----\n-Performs an apt-get update\n\ncompute\n----\n-Includes recipes `nova-common`, `api-metadata`, `network`\n-Installs nova-compute service\n\nlibvirt\n----\n-Installs libvirt, used by nova compute for management of the virtual machine environment\n\nnetwork\n----\n-Includes recipe `nova-common`\n-Installs nova network service\n\nnova-common\n----\n-May include recipe `selinux` (Fedora)\n-Builds the basic nova.conf config file with details of the rabbitmq, mysql, glance and keystone servers\n-Builds a openrc file for root with appropriate environment variables to interact with the nova client CLI\n\nnova-setup\n----\n-Includes recipes `nova-common`, `mysql:client`\n-Sets up the nova database on the mysql server, including the initial schema and subsequent creation of the appropriate networks\n\nscheduler\n----\n-Includes recipe `nova-common`\n-Installs nova scheduler service\n\nvncproxy\n----\n-Includes recipe `nova-common`\n-Installs and configures the vncproxy service for console access to VMs\n\nvolume\n----\n-Includes recipes `nova-common`, `api-os-volume`\n-Installs nova volume service and configures the service and endpoints in keystone\n\nnova-scheduler-patch\n----\n-Includes recipe osops-utils\n-Patches nova-scheduler based on installed package version\n\n\nAttributes\n==========\n\n* `default[\"nova\"][\"patch_files_on_disk\"]` - Boolean for patching files on disk\n* `default[\"nova\"][\"db\"][\"name\"]` - Name of nova database\n* `default[\"nova\"][\"db\"][\"username\"]` - Username for nova database access\n* `default[\"nova\"][\"db\"][\"password\"]` - Password for nova database access\nNOTE: db password is no longer set statically in the attributes file, but securely/randomly in the nova-common recipe\n\n* `default[\"nova\"][\"service_tenant_name\"]` - Tenant name used by nova when interacting with keystone\n* `default[\"nova\"][\"service_user\"]` - User name used by nova when interacting with keystone\n* `default[\"nova\"][\"service_pass\"]` - User password used by nova when interacting with keystone\nNOTE: service password is no longer set statically in the attributes file, but securely/randomly in the `*api` recipes\n* `default[\"nova\"][\"service_role\"]` - User role used by nova when interacting with keystone\n\n* `default[\"nova\"][\"compute\"][\"api\"][\"protocol\"]` - Protocol used for the OS API\n* `default[\"nova\"][\"compute\"][\"api\"][\"port\"]` - Port on which OS API runs\n* `default[\"nova\"][\"compute\"][\"api\"][\"version\"]` - Version of the OS API used\n\n* `default[\"nova\"][\"compute\"][\"adminURL\"]` - URL used to access the OS API for admin functions\n* `default[\"nova\"][\"compute\"][\"internalURL\"]` - URL used to access the OS API for user functions from an internal network\n* `default[\"nova\"][\"compute\"][\"publicURL\"]` - URL used to access the OS API for user functions from an external network\n\n* `default[\"nova\"][\"config\"][\"availability_zone\"]` - Nova availability zone.  Usually set at the node level to place a compute node in another az\n* `default[\"nova\"][\"config\"][\"default_schedule_zone\"]` - The availability zone to schedule instances in when no az is specified in the request\n* `default[\"nova\"][\"config\"][\"force_raw_images\"]` - Convert all images used as backing files for instances to raw (we default to false)\n* `default[\"nova\"][\"config\"][\"allow_same_net_traffic\"]` - Disable security groups for internal networks (we default to true)\n* `default[\"nova\"][\"config\"][\"osapi_max_limit\"]` - The maximum number of items returned in a single response from a collection resource (default is 1000)\n* `default[\"nova\"][\"config\"][\"cpu_allocation_ratio\"]` - Virtual CPU to Physical CPU allocation ratio (default 16.0)\n* `default[\"nova\"][\"config\"][\"ram_allocation_ratio\"]` - Virtual RAM to Physical RAM allocation ratio (default 1.5)\n* `default[\"nova\"][\"config\"][\"snapshot_image_format\"]` - Snapshot image format (valid options are : raw, qcow2, vmdk, vdi [we default to qcow2]).\n* `default[\"nova\"][\"config\"][\"start_guests_on_host_boot\"]` - Whether to restart guests when the host reboots\n* `default[\"nova\"][\"config\"][\"resume_guests_state_on_host_boot\"]` - Whether to start guests that were running before the host rebooted\n\nService Endpoint Attributes\n---------------------------\n\nEach Nova service endpoint is listed as a Hash in the `default[\"nova\"][\"services\"]` Hash. Each\nHash that describes a service endpoint should contain **either** a `uri` key **OR** contain\nkeys for `scheme`, `port`, `path`, and `network`, where `network` is something like \"public\" or \"private\" and\nrefers to a Hash of network information that is used by the `osops-utils::ip_location` library to determine\nan IP address in a named network.\n\nHere are the defaults:\n\n* `default[\"nova\"][\"services\"][\"api\"][\"scheme\"]` = \"http\" - Protocol used for the OpenStack Compute API endpoint\n* `default[\"nova\"][\"services\"][\"api\"][\"port\"]` = \"8774\" - Port on which the OpenStack Compute API runs\n* `default[\"nova\"][\"services\"][\"api\"][\"network\"]` = \"public\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"api\"][\"path\"]` = \"/v2/`%(tenant_id)s`\" - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"ec2-public\"][\"scheme\"]` = \"http\" - Protocol used for the AWS EC2 compatible API endpoint\n* `default[\"nova\"][\"services\"][\"ec2-public\"][\"port\"]` = \"8773\" - Port on which AWS EC2 compatible API runs\n* `default[\"nova\"][\"services\"][\"ec2-public\"][\"network\"]` = \"public\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"ec2-public\"][\"path\"]` = \"/services/Cloud\" - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"ec2-admin\"][\"scheme\"]` = \"http\" - Protocol used for the AWS EC2 compatible Admin API endpoint\n* `default[\"nova\"][\"services\"][\"ec2-admin\"][\"port\"]` = \"8773\" - Port on which AWS EC2 compatible Admin API runs\n* `default[\"nova\"][\"services\"][\"ec2-admin\"][\"network\"]` = \"public\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"ec2-admin\"][\"path\"]` = \"/services/Admin\" - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"xvpvnc\"][\"scheme\"]` = \"http\" - Protocol used for the xvp VNC Proxy endpoint\n* `default[\"nova\"][\"services\"][\"xvpvnc\"][\"port\"]` = \"6081\" - Port on which xvp VNC Proxy runs\n* `default[\"nova\"][\"services\"][\"xvpvnc\"][\"network\"]` = \"nova\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"xvpvnc\"][\"path\"]` = \"/console\" - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"novnc\"][\"scheme\"]` = \"http\" - Protocol used for the noVNC Proxy endpoint\n* `default[\"nova\"][\"services\"][\"novnc\"][\"port\"]` = \"6080\" - Port on which noVNC Proxy runs\n* `default[\"nova\"][\"services\"][\"novnc\"][\"network\"]` = \"nova\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"novnc\"][\"path\"]` = `\"/vnc_auto.html\"` - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"novnc-server\"][\"scheme\"]` = \"http\" - Protocol used for the noVNC Server endpoint\n* `default[\"nova\"][\"services\"][\"novnc-server\"][\"port\"]` = \"6080\" - Port on which noVNC Server runs\n* `default[\"nova\"][\"services\"][\"novnc-server\"][\"network\"]` = \"nova\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"novnc-server\"][\"path\"]` = `\"/vnc_auto.html\"` - The path after host to this endpoint\n\n* `default[\"nova\"][\"services\"][\"volume\"][\"scheme\"]` = \"http\" - Protocol used for the OpenStack Volume API endpoint\n* `default[\"nova\"][\"services\"][\"volume\"][\"port\"]` = \"8776\" - Port on which OpenStack Volume API runs\n* `default[\"nova\"][\"services\"][\"volume\"][\"network\"]` = \"public\" - The name of the network the IP address for this endpoint should come from\n* `default[\"nova\"][\"services\"][\"volume\"][\"path\"]` = \"/v1/`%(tenant_id)s`\" - The path after host to this endpoint\n\nNetworking Attributes\n---------------------\n\nBasic networking configuration is controlled with the following attributes:\n\n* `default[\"nova\"][\"network\"][\"network_manager\"]` - Defaults to \"nova.network.manager.FlatDHCPManager\". Set to \"nova.network.manager.VlanManager\" to configure VLAN Networking.\n* `default[\"nova\"][\"network\"][\"fixed_range\"]` - The CIDR for the network that VMs will be assigned to. In the case of VLAN Networking, this should be the network in which all VLAN networks that tenants are assigned will fit.\n* `default[\"nova\"][\"network\"][\"dmz_cidr\"]` - A CIDR for the range of IP addresses that will NOT be SNAT'ed by the nova network controller\n* `default[\"nova\"][\"network\"][\"public_interface\"]` - Defaults to eth0. Refers to the network interface used for VM addresses in the `fixed_range`.\n* `default[\"nova\"][\"network\"][\"vlan_interface\"]` - Defaults to eth0. Refers to the network interface used for VM addresses when VMs are assigned in a VLAN subnet.\n\nYou can have the cookbook automatically create networks in Nova for you by adding a Hash to the `default[\"nova\"][\"networks\"]` Array.\n**Note**: The `nova::nova-setup` recipe contains the code that creates these pre-defined networks.\n\nEach Hash must contain the following keys:\n\n* `ipv4_cidr` - The CIDR representation of the subnet. Supplied to the nova-manage network create command as `--fixed_ipv4_range`\n* `label` - A name for the network\n\nIn addition to the above required keys in the Hash, the below keys are optional:\n\n* `num_networks` - Passed as-is to `nova-manage network create` as the `--num_networks` option. This overrides the default `num_networks` nova.conf value.\n* `network_size` - Passed as-is to `nova-manage network create` as the `--network_size` option. This overrides the default `network_size` nova.conf value.\n* `bridge` - Passed as-is to `nova-manage network create` as the `--bridge` option.\n* `bridge_interface` -- Passed as-is to `nova-manage network create` as the `--bridge_interface` option. This overrides the default `vlan_interface` nova.conf value.\n* `dns1` - Passed as-is to `nova-manage network create` as the `--dns1` option.\n* `dns2` - Passed as-is to `nova-manage network create` as the `--dns2` option.\n* `multi_host` - Passed as-is to `nova-manage network create` as the `--multi_host` option. Values should be either 'T' or 'F'\n* `vlan` - Passed as-is to `nova-manage network create` as the `--vlan` option. Should be the VLAN tag ID.\n\nBy default, the `default[\"nova\"][\"networks\"]` array has two networks:\n\n* `default[\"nova\"][\"networks\"][\"public\"][\"label\"]` - Network label to be assigned to the public network on creation\n* `default[\"nova\"][\"networks\"][\"public\"][\"ipv4_cidr\"]` - Network to be created (in CIDR notation, e.g., 192.168.100.0/24)\n* `default[\"nova\"][\"networks\"][\"public\"][\"num_networks\"]` - Number of networks to be created\n* `default[\"nova\"][\"networks\"][\"public\"][\"network_size\"]` - Number of IP addresses to be used in this network\n* `default[\"nova\"][\"networks\"][\"public\"][\"bridge\"]` - Bridge to be created for accessing the VM network (e.g., br100)\n* `default[\"nova\"][\"networks\"][\"public\"][\"bridge_dev\"]` - Physical device on which the bridge device should be attached (e.g., eth2)\n* `default[\"nova\"][\"networks\"][\"public\"][\"dns1\"]` - DNS server 1\n* `default[\"nova\"][\"networks\"][\"public\"][\"dns2\"]` - DNS server 2\n\n* `default[\"nova\"][\"networks\"][\"private\"][\"label\"]` - Network label to be assigned to the private network on creation\n* `default[\"nova\"][\"networks\"][\"private\"][\"ipv4_cidr\"]` - Network to be created (in CIDR notation e.g., 192.168.200.0/24)\n* `default[\"nova\"][\"networks\"][\"private\"][\"num_networks\"]` - Number of networks to be created\n* `default[\"nova\"][\"networks\"][\"private\"][\"network_size\"]` - Number of IP addresses to be used in this network\n* `default[\"nova\"][\"networks\"][\"private\"][\"bridge\"]` - Bridge to be created for accessing the VM network (e.g., br200)\n* `default[\"nova\"][\"networks\"][\"private\"][\"bridge_dev\"]` - Physical device on which the bridge device should be attached (e.g., eth3)\n\nLibvirt Configuration Attributes\n---------------------------------\n\n* `default[\"nova\"][\"libvirt\"][\"virt_type\"]` - What hypervisor software layer to use with libvirt (e.g., kvm, qemu)\n* `default[\"nova\"][\"libvirt\"][\"vncserver_listen\"]` - IP address on the hypervisor that libvirt listens for VNC requests on\n* `default[\"nova\"][\"libvirt\"][\"vncserver_proxyclient_address\"]` - IP address on the hypervisor that libvirt exposes for VNC requests on (should be the same as `vncserver_listen`)\n* `default[\"nova\"][\"libvirt\"][\"auth_tcp\"]` - Type of authentication your libvirt layer requires\n* `default[\"nova\"][\"libvirt\"][\"ssh\"][\"private_key\"]` - Private key to use if using SSH authentication to your libvirt layer\n* `default[\"nova\"][\"libvirt\"][\"ssh\"][\"public_key\"]` - Public key to use if using SSH authentication to your libvirt layer\n\nScheduler Configuration Attributes\n----------------------------------\n\n* `default[\"nova\"][\"scheduler\"][\"scheduler_driver\"]` - the scheduler driver to use\nNOTE: The filter scheduler currently does not work with ec2.\n* `default[\"nova\"][\"scheduler\"][\"default_filters\"]` - a list of filters enabled for schedulers that support them.\n\nSyslog Configuration Attributes\n-------------------------------\n\n* `default[\"nova\"][\"syslog\"][\"use\"]` - Should nova log to syslog?\n* `default[\"nova\"][\"syslog\"][\"facility\"]` - Which facility nova should use when logging in python style (for example, `LOG_LOCAL1`)\n* `default[\"nova\"][\"syslog\"][\"config_facility\"]` - Which facility nova should use when logging in rsyslog style (for example, local1)\n\nTemplates\n=====\n* `api-paste.ini.erb` - Paste config for nova API middleware\n* `libvirt-bin.erb` - Initscript for starting libvirtd\n* `libvirtd-ssh-config` - Config file for libvirt SSH auth\n* `libvirtd-ssh-private-key.erb` - Private SSH key for libvirt SSH\n* `libvirtd-ssh-public-key.erb` - Public SSH key for libvirt SSH auth\n* `libvirtd.conf.erb` - Libvirt config file\n* `local_settings.py.erb` - Dashboard (horizon) config file\n* `nova.conf.erb` - Basic nova.conf file\n* `openrc.erb` - Contains environment variable settings to enable easy use of the nova client\n* `patches/` - misc. patches for nova\n\n\nLicense and Author\n==================\n\nAuthor:: Justin Shepherd (<justin.shepherd@rackspace.com>)\nAuthor:: Jason Cannavale (<jason.cannavale@rackspace.com>)\nAuthor:: Ron Pedde (<ron.pedde@rackspace.com>)\nAuthor:: Joseph Breu (<joseph.breu@rackspace.com>)\nAuthor:: William Kelly (<william.kelly@rackspace.com>)\nAuthor:: Darren Birkett (<darren.birkett@rackspace.co.uk>)\nAuthor:: Evan Callicoat (<evan.callicoat@rackspace.com>)\nAuthor:: Matt Ray (<matt@opscode.com>)\n\nCopyright 2012, Rackspace US, Inc.\nCopyright 2012, Opscode, Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n",
  "maintainer": "Opscode, Inc.",
  "maintainer_email": "matt@opscode.com",
  "license": "Apache 2.0",
  "platforms": {
    "ubuntu": ">= 0.0.0",
    "fedora": ">= 0.0.0",
    "redhat": ">= 0.0.0",
    "centos": ">= 0.0.0"
  },
  "dependencies": {
    "apt": ">= 0.0.0",
    "database": ">= 0.0.0",
    "glance": ">= 0.0.0",
    "keystone": ">= 0.0.0",
    "mysql": ">= 0.0.0",
    "openssh": ">= 0.0.0",
    "osops-utils": ">= 0.0.0",
    "rabbitmq": ">= 0.0.0",
    "selinux": ">= 0.0.0",
    "sysctl": ">= 0.0.0",
    "yum": ">= 0.0.0"
  },
  "recommendations": {
  },
  "suggestions": {
  },
  "conflicting": {
  },
  "providing": {
  },
  "replacing": {
  },
  "attributes": {
  },
  "groupings": {
  },
  "recipes": {
    "api-ec2": "",
    "api-metadata": "",
    "api-os-compute": "",
    "api-os-volume": "",
    "compute": "",
    "default": "",
    "libvirt": "",
    "network": "",
    "nova-common": "",
    "nova-scheduler-patch": "",
    "nova-setup": "",
    "scheduler": "",
    "vncproxy": "",
    "volume": ""
  },
  "version": "2012.1.2"
}